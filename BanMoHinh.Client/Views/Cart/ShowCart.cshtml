@using BanMoHinh.Share.ViewModels;
@using BanMoHinh.Share.Models;
@inject Microsoft.Extensions.Configuration.IConfiguration Configuration;
@model IEnumerable<BanMoHinh.Share.ViewModels.ViewCartDetails>

@{
    ViewData["Title"] = "ShowCart";
    int total = 0;
    int totalAmount = 0;
    int price = 0;
    var productDetail = ViewData["productDetail"] as List<ProductDetailVM>;
    var ProductImage = ViewData["ProductImage"] as List<ProductImage>;
    var Voucher = ViewData["voucher"] as List<Voucher>;
    var color = ViewData["color"] as List<Colors>;
    var size = ViewData["size"] as List<Size>;

}

    
        <div class="container">
            <div class="cart-content mt30 mb30">
                <div class="title-header mb20">
                    <h2 class="title">Giỏ Hàng</h2>
                    <p><span class="text-blue">@Model.Count()</span> sản phẩm trong giỏ hàng của bạn</p>
                </div>
            
                <table class="table">
                    <thead class="thead-light">
                        <tr>
                            <th scope="col">Ảnh</th>
                            <th scope="col">Sản phẩm</th>
                            <th scope="col">Size - Màu</th>
                            <th scope="col">Đơn giá</th>
                            <th scope="col">Số lượng</th>
                            <th scope="col">Thành tiền</th>
                            <th scope="col"></th>

                        </tr>
                      </thead>
                @foreach (var item in Model)
                {
                  
                    @if (!Model.Any())
                    {
                        <p>Không có sản phẩm nào trong giỏ hàng.</p>
                    }

                    else
                    {
                        <tbody>
                            <tr>
                                <td>
                                    <img src="@(Configuration["BaseAddress"]+item.ImageName)" alt="">
                                </td>
                                <td>
                                    <div class="item-center">
                                        <p>@item.ProductName</p>
                                </td>

                                <td>                     
                                    <div class="item-center text-red" id="total-price">
                                        @{
                                            total = Convert.ToInt32(item.TotalPrice);
                                            totalAmount += total;
                                        }
                                        @total.ToString("n0") đ
                                </div>
                            </td>
                            <td>
                            <div class="item-center pinside10"><a asp-action="DeleteItemInCart" asp-route-id="@item.ProductDetail_Id" asp-route-idCartItem="@item.Id" asp-route-idgh="@item.CartId">Xóa</a></div>
                            </td>
                        </tr>


                    </tbody>}
                    }
                </table>
                <div class="prices-summary">
            <div class="left-content">
                <a href="product-list.html" class="derection-product text-blue">
                    <i class="fas fa-long-arrow-alt-left"></i> Tiếp tục
                    mua hàng
                </a>
            </div>
            <div class="right-con">
                <div class="total-receipt">
                    <div class="prices-total pinside20">
                        <span class="price-text">Tổng cộng</span>
                        <span class="prices-value prices-final text-red">
                            @(
                                totalAmount.ToString("n0")
                                )
                        </span>
                    </div>
                </div>
                <a asp-controller="Bill" asp-action="Checkout" class="btn-default btn-checkout">Mua Hàng</a>
            </div>
        </div>
       </div>
    <!-- /.cart-total -->

    <script>
        
    </script>

